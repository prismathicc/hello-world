<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>table v1.0</title>
	<style type="text/css">
		@import url('https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap');
		*{
			box-sizing: border-box;
		}
		body{
			width: 100vw;
			height: 100vh;
			margin: 0;
			padding: 0;
			user-select: none;
			font-family: 'Roboto Mono';
			font-size: 3vh;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		#main{
			width: 75%;
			height: 75%;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		#table-wrap{
			width: 100%;
			height: 100%;
			display: flex;
			border: 2px solid gray;
			box-sizing: border-box;
		}
		.column{
			width: 1px;
			height: 100%;
			display: flex;
			flex-direction: column;
			border-left: 2px solid gray;
			border-right: 2px solid gray;
			box-sizing: border-box;
		}
		.cell{
			width: 100%;
			height: 1px;
			border-top: 2px solid gray;
			border-bottom: 2px solid gray;
			box-sizing: border-box;
		}
		.bcell{
			width: auto;
			height: auto;
			border: 0;
		}
		.item{
			width: 100%;
			height: 100%;
			font-size:;
			transition: all .5s ease;
			overflow-y: auto;
			overflow-x: auto;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		#add-item{
			position: absolute;
			bottom: 3%;
			left: 3%;
			font-size: 15px;
			display: flex;
			opacity: .5;
		}
		#add-table{
			position: absolute;
			bottom: 3%;
			right: 3%;
			font-size: 15px;
			display: flex;
			opacity: .5;
		}
		#add-item:hover{
			opacity: 1;
		}
		#add-table:hover{
			opacity: 1;
		}
		input{
			outline: none;
			font-family: 'Roboto Mono';
			border: 0;
			border-bottom: 2px solid gray;
			margin-right: 10px;
		}
		#button:hover{
			cursor: pointer;
			text-decoration: underline;
		}
		#remove{
			position: absolute;
			top: 3%;
			left: 3%;
			opacity: .5;
		}
		#remove:after{
			content: '(drag)';
			opacity: .5;
		}
		#remove:hover{
			color: red;
			opacity: 1;
		}
	</style>
</head>
<body onmouseup="put()">
	<div id="main">
		<div id="table-wrap">
			<!--<div class="column">
				<div class="cell imanitem" onmousemove="preview(this)">
					<div id="imanitem" class="item" onmousedown='pick(this)' onmouseup="put(this)">im an item</div>
				</div>
				<div class="cell" onmousemove="preview(this)"></div>
			</div>
			<div class="column">
				<div class="cell" onmousemove="preview(this)"></div>
				<div class="cell imananotheritem" onmousemove="preview(this)">
					<div id="imananotheritem" class="item" onmousedown='pick(this)' onmouseup="put(this)">im an another item</div>
				</div>

			</div>-->
		</div>
		<div id="add-item">
			<input type="text" placeholder="x,y,id,txt,color">
			<div id="button" onclick="generateItem(this.parentElement.children[0].value.split(','))">create item</div>
		</div>
		<div id="add-table">
			<input type="text" placeholder="x,y,true/false">
			<div id="button" onclick="generateTable(this.parentElement.children[0].value.split(','))">create table</div>
		</div>
		<div class="cell bcell" id="remove" onmouseup="removeItem(this)">
			REMOVE ELEMENT
		</div>
	</div>
</body>
<script type="text/javascript">
	var pickedId = '';
	function pick(e){
		e.style.transform = 'scale(.9)';
		e.style.opacity = .7;
		pickedId = e.id;
	}
	function preview(e){
		if(e.classList.length == 1 && pickedId !== ''){
			var item = document.getElementById(pickedId);
			var cells = document.getElementsByClassName('cell');
			e.classList.add(item.id);
			e.appendChild(item);
			for(var i=0;i<cells.length;i++){
				if(cells[i] !== e && cells[i].classList.contains(item.id)){
					cells[i].classList.remove(item.id);
				}
			}
		}
	}
	function put(){
		if(pickedId !== ''){
			var item = document.getElementById(pickedId);
			item.style.transform = '';
			item.style.opacity = 1;
			pickedId = '';
		}
	}
	function generateTable(data){
		if(data[2]){
			var main = document.getElementById('main');
			document.getElementById('table-wrap').remove();
			var tableWrap = document.createElement('div');
			tableWrap.id = 'table-wrap';
			tableWrap.style.width = '100%';
			tableWrap.style.height = '100%';
			tableWrap.style.display = 'flex';
			tableWrap.style.border = '2px solid gray';
			tableWrap.style.boxSizing = 'border-box';
			main.appendChild(tableWrap);
			for(var i=0;i<data[0];i++){
				var newcolumn = document.createElement('div');
				newcolumn.classList.add('column');
				newcolumn.style.width = 100/data[0]+'%';
				tableWrap.appendChild(newcolumn);
			}
			for(var i=0;i<tableWrap.children.length;i++){
				for(var j=0;j<data[1];j++){
					var newCell = document.createElement('div');
					newCell.classList.add('cell');
					newCell.onmousemove = function(){preview(this)};
					newCell.style.height = 100/data[1]+'%';
					tableWrap.children[i].appendChild(newCell);
				}
			}
		}
	}
	function generateItem(data){
		var tableWrap = document.getElementById('table-wrap');
		var newItem = document.createElement('div');
		newItem.classList.add('item');
		newItem.onmousedown = function(){pick(this)};
		newItem.id = data[2];
		newItem.innerHTML = data[3];
		newItem.style.backgroundColor = data[4];
		if(tableWrap.children[data[0]-1].children[data[1]-1].children.length == 0){
			tableWrap.children[data[0]-1].children[data[1]-1].appendChild(newItem);
		}
	}
	function removeItem(){
		if(pickedId !== ''){
			document.getElementById(pickedId).parentElement.classList.remove(pickedId);
			document.getElementById(pickedId).remove();
		}
	}
	generateTable([4,4,true]);
	generateItem([4,4,'credit','by prismatic_','lightgreen']);
</script>
</html>
